import{e as D,r as h,f as L,o as n,c as s,F as N,a as o,t as e,g as S,d as _,p as B,h as F}from"./main-cabe29b8.js";const R=(c,d)=>{const y=c.__vccOpts||c;for(const[r,f]of d)y[r]=f;return y},x=c=>(B("data-v-5608acf2"),c=c(),F(),c),A={class:"channel__wrapper d-flex f-center f-col w-100 h-100"},P={key:0,class:"checking-text"},z={class:"channel__info m-bottom"},U=x(()=>o("span",null,e("距離 "),-1)),V={class:"channel-name"},E=x(()=>o("span",null,e(" 上次開台已經過了"),-1)),H={class:"channel__time"},J={class:"channel__time-text m-bottom"},Z={class:"channel__time-text"},q={class:"channel__care d-flex f-center m-top f-wrap"},G=["href"],K=["href"],Q=["href"],W=["href"],X={key:2,class:"invalid-text d-flex f-center f-col"},Y={class:"m-bottom"},j=x(()=>o("span",null,e(" 目前沒有開台紀錄"),-1)),ee={key:3,class:"invalid-text d-flex f-center"},te={key:4,class:"invalid-text d-flex f-center"},ae={key:5,class:"invalid-text d-flex f-center"},ne={__name:"Channel",setup(c){const d="https://service.starknows.tw",r=D().params.channelId,f=/@[0-9a-zA-Z\_\-\.]+$/gm.test(r),a=h(null),k=h(""),g=h(null),u=h(null),w=h(null),b=h(null),I=l=>{const i=new Date-new Date(l),p=Math.floor(i/864e5),v=i%864e5,m=Math.floor(v/36e5),t=v%36e5,O=Math.floor(t/6e4),T=t%6e4,M=Math.floor(T/1e3);return[p,m,O,M]},C=async l=>{if(f)try{const p=await(await fetch(`${d}/auth`,{method:"post",headers:{"Content-Type":"application/json"}})).json(),v=JSON.stringify({channelId:l}),m={"Content-Type":"application/json"};document.cookie,p.token&&(m.Authorization=`Bearer ${p.token}`),fetch(`${d}/api/channel-info`,{method:"post",headers:m,body:v,credentials:"include"}).then(t=>{switch(t.status){case 400:a.value="unsafe";break;case 403:a.value="empty";break;case 404:a.value="error";break;default:}return t.json()}).then(t=>{a.value||(a.value="valid",g.value=t.lastLiveId,k.value=t.name,w.value=t.deer,b.value=t.ecpay,u.value=I(t.lastLiveTime),window.setInterval(()=>{u.value=I(t.lastLiveTime)},1e3))})}catch(i){}},$=l=>typeof l!="string"?null:l.replace("&#13;","");return L(()=>{f?C(r):a.value="unsafe"}),(l,i)=>(n(),s("div",A,[a.value?a.value==="valid"?(n(),s(N,{key:1},[o("div",z,[U,o("span",V,e(k.value),1),E]),o("div",H,[o("span",J,e(`${u.value[0]} 天 ${u.value[1]}時 `),1),o("span",Z,e(`${u.value[2]}分 ${u.value[3]}秒`),1)]),o("div",q,[S(r)?(n(),s("a",{key:0,href:`https://www.youtube.com/${S(r)}?sub_confirmation=1`,target:"_blank",rel:"nooppener noreferrer"},e(">> 關心主播"),8,G)):_("",!0),g.value?(n(),s("a",{key:1,href:`https://www.youtube.com/watch?v=${g.value}`,target:"_blank",rel:"nooppener noreferrer"},e(">> 緬懷主播"),8,K)):_("",!0),w.value?(n(),s("a",{key:2,class:"highlight",href:`https://deerdonate.herokuapp.com/donation/${$(w.value)}`,target:"_blank",rel:"nooppener noreferrer"},e(">> 譴責主播"),8,Q)):_("",!0),b.value?(n(),s("a",{key:3,class:"highlight",href:`https://p.ecpay.com.tw/${$(b.value)}`,target:"_blank",rel:"nooppener noreferrer"},e(">> 譴責主播"),8,W)):_("",!0)])],64)):a.value==="empty"?(n(),s("div",X,[o("span",Y,e(k.value),1),j])):a.value==="unsafe"?(n(),s("div",ee,e("頻道 ID 錯誤"))):a.value==="error"?(n(),s("div",te,e("錯誤發生"))):a.value==="429"?(n(),s("div",ae,e("服務暫時無法使用"))):_("",!0):(n(),s("div",P,"Checking..."))]))}},oe=R(ne,[["__scopeId","data-v-5608acf2"]]);export{oe as default};
