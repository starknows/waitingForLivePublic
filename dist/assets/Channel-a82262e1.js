import{e as M,r as u,f as D,o as s,c as n,F as N,a as o,t as e,g as $,d as h,p as B,h as F}from"./main-ad23c287.js";const L=(c,_)=>{const y=c.__vccOpts||c;for(const[l,d]of _)y[l]=d;return y},x=c=>(B("data-v-db1f56cb"),c=c(),F(),c),R={class:"channel__wrapper d-flex f-center f-col w-100 h-100"},A={key:0,class:"checking-text"},z={class:"channel__info m-bottom"},P=x(()=>o("span",null,e("距離 "),-1)),U={class:"channel-name"},V=x(()=>o("span",null,e(" 上次開台已經過了"),-1)),E={class:"channel__time"},H={class:"channel__time-text m-bottom"},J={class:"channel__time-text"},Z={class:"channel__care d-flex f-center m-top f-wrap"},q=["href"],G=["href"],K=["href"],Q=["href"],W={key:2,class:"invalid-text d-flex f-center f-col"},X={class:"m-bottom"},Y=x(()=>o("span",null,e(" 目前沒有開台紀錄"),-1)),j={key:3,class:"invalid-text d-flex f-center"},ee={key:4,class:"invalid-text d-flex f-center"},te={key:5,class:"invalid-text d-flex f-center"},ae={__name:"Channel",setup(c){const _="https://service.starknows.tw",l=M().params.channelId,d=/@[0-9a-zA-Z\_\-\.]+$/gm.test(l),a=u(null),k=u(""),b=u(null),r=u(null),w=u(null),g=u(null),I=f=>{const i=new Date-new Date(f),p=Math.floor(i/864e5),v=i%864e5,m=Math.floor(v/36e5),t=v%36e5,C=Math.floor(t/6e4),O=t%6e4,T=Math.floor(O/1e3);return[p,m,C,T]},S=async f=>{if(d)try{const p=await(await fetch(`${_}/auth`,{method:"post",headers:{"Content-Type":"application/json"}})).json(),v=JSON.stringify({channelId:f}),m={"Content-Type":"application/json"};document.cookie,p.token&&(m.Authorization=`Bearer ${p.token}`),fetch(`${_}/api/channel-info`,{method:"post",headers:m,body:v,credentials:"include"}).then(t=>{switch(t.status){case 400:a.value="unsafe";break;case 403:a.value="empty";break;case 404:a.value="error";break;default:}return t.json()}).then(t=>{a.value||(a.value="valid",b.value=t.lastLiveId,k.value=t.name,w.value=t.deer,g.value=t.ecpay,r.value=I(t.lastLiveTime),window.setInterval(()=>{r.value=I(t.lastLiveTime)},1e3))})}catch(i){}};return D(()=>{d?S(l):a.value="unsafe"}),(f,i)=>(s(),n("div",R,[a.value?a.value==="valid"?(s(),n(N,{key:1},[o("div",z,[P,o("span",U,e(k.value),1),V]),o("div",E,[o("span",H,e(`${r.value[0]} 天 ${r.value[1]}時 `),1),o("span",J,e(`${r.value[2]}分 ${r.value[3]}秒`),1)]),o("div",Z,[$(l)?(s(),n("a",{key:0,href:`https://www.youtube.com/${$(l)}?sub_confirmation=1`,target:"_blank",rel:"nooppener noreferrer"},e(">> 關心主播"),8,q)):h("",!0),b.value?(s(),n("a",{key:1,href:`https://www.youtube.com/watch?v=${b.value}`,target:"_blank",rel:"nooppener noreferrer"},e(">> 緬懷主播"),8,G)):h("",!0),w.value?(s(),n("a",{key:2,class:"highlight",href:`https://deerdonate.herokuapp.com/donation/${w.value}`,target:"_blank",rel:"nooppener noreferrer"},e(">> 譴責主播"),8,K)):h("",!0),g.value?(s(),n("a",{key:3,class:"highlight",href:`https://p.ecpay.com.tw/${g.value}`,target:"_blank",rel:"nooppener noreferrer"},e(">> 譴責主播"),8,Q)):h("",!0)])],64)):a.value==="empty"?(s(),n("div",W,[o("span",X,e(k.value),1),Y])):a.value==="unsafe"?(s(),n("div",j,e("頻道 ID 錯誤"))):a.value==="error"?(s(),n("div",ee,e("錯誤發生"))):a.value==="429"?(s(),n("div",te,e("服務暫時無法使用"))):h("",!0):(s(),n("div",A,"Checking..."))]))}},ne=L(ae,[["__scopeId","data-v-db1f56cb"]]);export{ne as default};
