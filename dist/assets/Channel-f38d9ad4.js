import{_ as S,f as M,r as s,g as B,o as c,c as r,F,a as n,t as o,h as v,e as w,p as N,i as O}from"./index-b6ab636c.js";const k=l=>(N("data-v-a1faf008"),l=l(),O(),l),T={class:"channel__wrapper d-flex f-center f-col w-100 h-100"},D={class:"channel__info m-bottom"},z=k(()=>n("span",null,o("距離 "),-1)),A={class:"channel-name"},L=k(()=>n("span",null,o(" 上次開台已經過了"),-1)),V={class:"channel__time"},E={class:"channel__time-text m-bottom"},H={class:"channel__time-text"},J={class:"channel__care d-flex f-center m-top"},R=["href"],Z=["href"],j={key:1,class:"checking-text"},q={__name:"Channel",setup(l){const h=M().params.channelId,d=s(null),u=s(""),y=/@[0-9a-zA-Z\_\-\.]+$/gm.test(h),g=s(null),p=s(!0),a=s(null),f=_=>{const t=new Date-new Date(_),i=Math.floor(t/864e5),e=t%864e5,I=Math.floor(e/36e5),m=e%36e5,x=Math.floor(m/6e4),$=m%6e4,C=Math.floor($/1e3);return[i,I,x,C]},b=async _=>{y&&fetch("https://service-starknows.onrender.com/auth",{method:"post",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{const i=JSON.stringify({channelId:_});g.value=t.token,fetch("https://service-starknows.onrender.com/api/last-stream",{method:"post",headers:{Authorization:`Bearer ${t.token}`,"Content-Type":"application/json"},body:i}).then(e=>e.json()).then(e=>{console.log("last-stream: ",e),p.value=!1,d.value=e.lastLiveId,a.value=f(e.data),window.setInterval(()=>{a.value=f(e.data)},1e3)}),fetch("https://service-starknows.onrender.com/api/channel-name",{method:"post",headers:{Authorization:`Bearer ${t.token}`,"Content-Type":"application/json"},body:i}).then(e=>e.json()).then(e=>{console.log("channel-name: ",e),u.value=e.data})}).catch(t=>{console.log(t)})};return B(()=>{b(h)}),(_,t)=>(c(),r("div",T,[p.value?(c(),r("div",j,"Checking...")):(c(),r(F,{key:0},[n("div",D,[z,n("span",A,o(u.value),1),L]),n("div",V,[n("span",E,o(`${a.value[0]} 天 ${a.value[1]}時 `),1),n("span",H,o(`${a.value[2]}分 ${a.value[3]}秒`),1)]),n("div",J,[v(h)?(c(),r("a",{key:0,href:`https://www.youtube.com/${v(h)}?sub_confirmation=1`,target:"_blank",rel:"nooppener noreferrer"},o(">> 關心主播"),8,R)):w("",!0),d.value?(c(),r("a",{key:1,href:`https://www.youtube.com/watch?v=${d.value}`,target:"_blank",rel:"nooppener noreferrer"},o(">> 緬懷主播"),8,Z)):w("",!0)])],64))]))}},P=S(q,[["__scopeId","data-v-a1faf008"]]);export{P as default};
